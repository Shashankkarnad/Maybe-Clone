#!/usr/bin/env ruby
# frozen_string_literal: true

require 'rubygems'
require 'bundler/setup'
require 'i18n/tasks'

module I18nTasksSync
  def self.add_missing_keys
    puts "Adding missing keys..."
    system('bundle exec i18n-tasks add-missing --nil-value')
  end

  def self.remove_unused_keys
    puts "Removing unused keys..."
    system('yes | bundle exec i18n-tasks remove-unused')
  end

  def self.auto_translate_missing_keys
    puts "Translating missing keys..."
    system('bundle exec i18n-tasks translate-missing --from=en')
    # or backend open ai
    # system('bundle exec i18n-tasks translate-missing --from=en --backend=openai')
  end
end

I18nTasksSync.add_missing_keys
I18nTasksSync.remove_unused_keys
I18nTasksSync.auto_translate_missing_keys

puts "Translation files have been synchronized and translated."
